
# Hexagonal Architecture

‚ÄúPermitir que uma aplica√ß√£o seja igualmente conduzida por usu√°rios, programas, testes automatizados, scripts em lote e que possa ser desenvolvida e testada isoladamente de seus dispositivos de execu√ß√£o e banco de dados finais.‚Äù (Alistair Cockburn, 2005).

### üëç Vantagens da Arquitetura Hexagonal:
- Desacoplamento da l√≥gica de neg√≥cios
- Facilidade de testes
- Flexibilidade e Extensibilidade
- Manuten√ß√£o e Evolu√ß√£o
- Organiza√ß√£o do c√≥digo

### üëé Desvantagens da Arquitetura Hexagonal:
- Curva de Aprendizado
- Maior complexidade inicial
- Mais c√≥digo boilerplate
- Dificuldade na integra√ß√£o com frameworks tradicionais


### ‚úÖ Quando usar?
- Projetos de m√©dio a grande porte, onde a manuten√ß√£o, escalabilidade e testabilidade s√£o cruciais.
- Sistemas que precisam ser resilientes a mudan√ßas de tecnologias externas (ex.: mudan√ßa de banco de dados ou API 
  externa).
- Projetos onde o foco no dom√≠nio e na l√≥gica de neg√≥cio √© primordial.
- Cen√°rios onde a testabilidade √© um requisito essencial.

### ‚ùå Quando evitar?
- Projetos pequenos ou simples, onde o overhead inicial n√£o compensa os benef√≠cios.
- Times com pouca experi√™ncia em arquitetura hexagonal ou sem tempo para treinamento adequado.

## Projeto Event App

##### Modelo
 - Customer: Representa√ß√£o do cliente no sistema 
 - Partner: Representa quem vai criar um evento (uma casa de show, por exemplo)
 - Event: Representa os eventos
 - Ticket: Representa a lista de tickets que ser√° disponibilizado para cada evento

### Diagrama

![hexagonal-architecture-diagram](./assets/.attachments/hexagonal-architecture-2024.png)

## GraphQL

- http://localhost:8080/graphiql?path=/graphql

### Customer

    mutation {
      createCustomer(input: {name: "joe", cpf: "123.332.229-87", email: "joe@email.com"}) {
        id
      }
    }
  
    query {
      customer: customerOfId(id: "14641f16-4cce-4e56-9bb0-a55873ef3a79") {
        name
      }
    }

### Partner

    mutation {
      createPartner(input: {name: "Johnny", cnpj: "12.231.123/0001-11", email: "johnny@email.com"}) {
        id
      }
    }

    query {
      partner: partnerOfId(id: "24721be4-eab2-4878-b9bb-ef6cb522b230") {
        id
      }
    }

### Event

    mutation {
      createEvent(input: {name: "Disney 2.0", date: "2025-01-01", totalSpots: 1, partnerId:"24721be4-eab2-4878-b9bb-ef6cb522b230"}) {
        id
      }
    }

### Subscribe Customer to Event

    mutation {
      subscribeCustomerToEvent(input: {customerId: "14641f16-4cce-4e56-9bb0-a55873ef3a79", eventId: "e9a8b96e-0137-4715-a896-c352cdd2e17e"}) {
        eventId
      }
    }